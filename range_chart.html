
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ポーカー戦略チャート</title>
  <style>
    body { font-family: sans-serif; background: #f5f5f5; padding: 20px; }
    h1 { text-align: center; }
    select { margin: 5px; padding: 6px; font-size: 1rem; }
    .controls { text-align: center; margin-bottom: 20px; }
    .result-box { background: #fff; padding: 10px; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
  </style>
</head>
<body>

<h1>♠️ ポーカー戦略チャート</h1>

<div class="controls">
  <select id="actionSelect" onchange="updateOptions()"></select>
  <select id="selfSelect" onchange="updateOptions()"></select>
  <select id="vsSelect" onchange="updateOptions()"></select>
  <select id="stackSelect" onchange="updateOptions()"></select>
  <select id="typeSelect"></select>
  <button onclick="showSelected()">表示</button>
</div>

<div class="result-box" id="resultBox">
  <p>ここに選択されたレンジ表の条件が表示されます</p>
</div>

<script>
const validTree = {
  "open": {
    "UTG": {
      "none": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      }
    },
    "HJ": {
      "none": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      }
    },
    "CO": {
      "none": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      }
    },
    "BTN": {
      "none": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      }
    },
    "SB": {
      "none": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      }
    },
    "BB": {
      "none": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      }
    }
  },
  "3bet": {
    "BTN": {
      "CO": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      }
    },
    "SB": {
      "BTN": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      }
    },
    "BB": {
      "SB": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      }
    }
  },
  "call": {
    "BB": {
      "BTN": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      },
      "CO": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      }
    },
    "SB": {
      "BTN": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      }
    }
  },
  "defend": {
    "BB": {
      "CO": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      },
      "BTN": {
        "15": [
          "tight",
          "normal",
          "loose"
        ],
        "30": [
          "tight",
          "normal",
          "loose"
        ],
        "50": [
          "tight",
          "normal",
          "loose"
        ],
        "100": [
          "tight",
          "normal",
          "loose"
        ]
      }
    }
  }
};

function populateSelect(select, options) {
  select.innerHTML = '';
  for (const val of options) {
    const opt = document.createElement('option');
    opt.value = val;
    opt.textContent = val;
    select.appendChild(opt);
  }
}

function updateOptions() {
  const action = document.getElementById("actionSelect").value;
  const self = document.getElementById("selfSelect").value;
  const vsBox = document.getElementById("vsSelect");
  const stackBox = document.getElementById("stackSelect");
  const typeBox = document.getElementById("typeSelect");

  const vsOptions = Object.keys(validTree[action][self]);
  populateSelect(vsBox, vsOptions);
  const vs = vsBox.value;

  const stackOptions = Object.keys(validTree[action][self][vs]);
  populateSelect(stackBox, stackOptions);
  const stack = stackBox.value;

  const typeOptions = validTree[action][self][vs][stack];
  populateSelect(typeBox, typeOptions);
}

function showSelected() {
  const action = document.getElementById("actionSelect").value;
  const self = document.getElementById("selfSelect").value;
  const vs = document.getElementById("vsSelect").value;
  const stack = document.getElementById("stackSelect").value;
  const type = document.getElementById("typeSelect").value;
  document.getElementById("resultBox").innerHTML = `
    <h3>選択中の条件:</h3>
    <ul>
      <li>アクション: ${{"open": "オープン", "3bet": "3ベット", "call": "コール", "defend": "ディフェンス"}[action] || action}</li>
      <li>自分のポジション: ${self}</li>
      <li>相手のポジション: ${vs === "none" ? "（なし）" : vs}</li>
      <li>スタックサイズ: ${stack}BB</li>
      <li>レンジタイプ: ${type}</li>
    </ul>
  `;
}

window.onload = function() {
  populateSelect(document.getElementById("actionSelect"), Object.keys(validTree));
  populateSelect(document.getElementById("selfSelect"), Object.keys(validTree["open"]));
  updateOptions();
};
</script>

</body>
</html>
